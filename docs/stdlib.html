<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/tiro-website/favicon.ico"/><title>The standard library | tiro</title><meta name="description" content="The tiro Programming Language"/><meta property="og:type" content="website"/><meta property="og:title" content="The standard library"/><meta property="og:description" content="The tiro Programming Language"/><meta property="twitter:card" content="summary"/><meta property="twitter:creator" content="Michael Beckemeyer"/><meta property="twitter:title" content="The standard library"/><meta property="twitter:description" content="The tiro Programming Language"/><meta name="next-head-count" content="12"/><link rel="preload" href="/tiro-website/_next/static/css/036f95e26234dc68a25b.css" as="style"/><link rel="stylesheet" href="/tiro-website/_next/static/css/036f95e26234dc68a25b.css" data-n-g=""/><link rel="preload" href="/tiro-website/_next/static/css/b0380d472525ea19911c.css" as="style"/><link rel="stylesheet" href="/tiro-website/_next/static/css/b0380d472525ea19911c.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/tiro-website/_next/static/chunks/webpack-1c4df81e47dc282f3295.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/framework.453115041c71f6937693.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/commons.51b98284b0ee82cfedda.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/main-331f23dcb60961fd008c.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/077bbc3e42b200d19aa8b06179d2d8d0a5231ac6.637069d83bf990885541.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/pages/_app-11ca0b17fb5a8b952a65.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/31ad9c9d.f6000bcd368b3f5e448a.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/2c060dff92e6454490672d24ff1b5f7d837bc315.9e04c498ff7984a5eb5a.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/cb62dbd6a1bdc0783d6bfd7347e6b2b91c6334b4.547212e3b228b0eed42b.js" as="script"/><link rel="preload" href="/tiro-website/_next/static/chunks/pages/docs/%5B...slug%5D-b17462f1feeecc64df94.js" as="script"/></head><body><div id="__next"><div class="Layout_container__QVNsN"><header class="Layout_header__2ZJ77"><div class="bp3-navbar bp3-dark Layout_nav__3Jv66"><div class="bp3-navbar-group bp3-align-left"><div class="bp3-navbar-heading"><a class="Layout_title__WylHX Layout_pageLink__3DA3h" href="/tiro-website">tiro</a></div><a class="Layout_pageLink__3DA3h" href="/tiro-website/docs">Documentation</a><a class="Layout_pageLink__3DA3h" href="/tiro-website/sandbox">Sandbox</a></div><div class="bp3-navbar-group bp3-align-right"><a class="Layout_pageLink__3DA3h" href="https://github.com/mbeckem/tiro" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 16 16" width="32" class="Layout_icon__3qbZj"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>Github</a></div></div></header><main class="Layout_content__3r5bY"><div class="Container_container__1h3U7"><article class="bp3-running-text bp3-text-large Article_article__1JsT3"><h1 id="the-standard-library"><a class="anchor-link" href="#the-standard-library">#</a>The standard library</h1><p>Basic types and functions provided by the runtime.</p><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">import std;</span></div></pre></div><h2 id="contents"><a class="anchor-link" href="#contents">#</a>Contents</h2><ul><li><p><a href="#basic-types-and-functions">Basic types and functions</a></p><ul><li><a href="#type-boolean">type Boolean</a></li><li><a href="#type-integer">type Integer</a></li><li><a href="#type-float">type Float</a></li><li><a href="#type-null">type Null</a></li><li><a href="#type-symbol">type Symbol</a></li><li><a href="#type-function">type Function</a></li><li><a href="#type-module">type Module</a></li><li><a href="#type-nativeobject">type NativeObject</a></li><li><a href="#type-nativepointer">type NativePointer</a></li><li><a href="#type-type">type Type</a></li><li><a href="#func-type_of">func type_of</a></li></ul></li><li><p><a href="#containers">Containers</a></p><ul><li><a href="#type-tuple">type Tuple</a></li><li><a href="#type-record">type Record</a></li><li><a href="#type-array">type Array</a></li><li><a href="#type-buffer">type Buffer</a></li><li><a href="#type-map">type Map</a></li><li><a href="#type-set">type Set</a></li></ul></li><li><p><a href="#strings">Strings</a></p><ul><li><a href="#type-string">type String</a></li><li><a href="#type-stringslice">type StringSlice</a></li><li><a href="#type-stringbuilder">type StringBuilder</a></li><li><a href="#func-new_string_builder">func new_string_builder</a></li><li><a href="#func-debug_repr">func debug_repr</a></li></ul></li><li><p><a href="#floating-point-math">Floating point math</a></p><ul><li><a href="#const-pi">const PI</a></li><li><a href="#const-tau">const TAU</a></li><li><a href="#const-e">const E</a></li><li><a href="#func-abs">func abs</a></li><li><a href="#func-pow">func pow</a></li><li><a href="#func-log">func log</a></li><li><a href="#func-sqrt">func sqrt</a></li><li><a href="#func-round">func round</a></li><li><a href="#func-ceil">func ceil</a></li><li><a href="#func-floor">func floor</a></li><li><a href="#func-sin">func sin</a></li><li><a href="#func-cos">func cos</a></li><li><a href="#func-tan">func tan</a></li><li><a href="#func-asin">func asin</a></li><li><a href="#func-acos">func acos</a></li><li><a href="#func-atan">func atan</a></li></ul></li><li><p><a href="#input-and-output">Input and output</a></p><ul><li><a href="#func-print">func print</a></li><li><a href="#func-loop_timestamp">func loop_timestamp</a></li></ul></li><li><p><a href="#coroutines">Coroutines</a></p><ul><li><a href="#type-coroutine">type Coroutine</a></li><li><a href="#type-coroutinetoken">type CoroutineToken</a></li><li><a href="#func-current_coroutine">func current_coroutine</a></li><li><a href="#func-launch">func launch</a></li><li><a href="#func-dispatch">func dispatch</a></li><li><a href="#func-coroutine_token">func coroutine_token</a></li><li><a href="#func-yield_coroutine">func yield_coroutine</a></li></ul></li><li><p><a href="#error-handling">Error handling</a></p><ul><li><a href="#type-result">type Result</a></li><li><a href="#func-success">func success</a></li><li><a href="#func-failure">func failure</a></li><li><a href="#type-exception">type Exception</a></li><li><a href="#func-panic">func panic</a></li><li><a href="#func-catch_panic">func catch_panic</a></li></ul></li></ul><h2 id="basic-types-and-functions"><a class="anchor-link" href="#basic-types-and-functions">#</a>Basic types and functions</h2><h3 id="type-boolean"><a class="anchor-link" href="#type-boolean">#</a>type Boolean</h3><p>The type of <code>true</code> and <code>false</code>.</p><h3 id="type-integer"><a class="anchor-link" href="#type-integer">#</a>type Integer</h3><p>The type of integer expressions such as <code>7</code> or <code>0x1F</code>.</p><h3 id="type-float"><a class="anchor-link" href="#type-float">#</a>type Float</h3><p>Type type of floating point expressions such as <code>1.25</code>.</p><h3 id="type-null"><a class="anchor-link" href="#type-null">#</a>type Null</h3><p>The type of the constant <code>null</code>.</p><h3 id="type-symbol"><a class="anchor-link" href="#type-symbol">#</a>type Symbol</h3><p>The type of symbol literals, e.g. <code>#answer</code>.</p><h3 id="type-function"><a class="anchor-link" href="#type-function">#</a>type Function</h3><p>The type of all functions.</p><h3 id="type-module"><a class="anchor-link" href="#type-module">#</a>type Module</h3><p>The type of all modules:</p><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">import std;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">// std.type_of(std) == std.Module</span></div></pre></div><h3 id="type-nativeobject"><a class="anchor-link" href="#type-nativeobject">#</a>type NativeObject</h3><p>The type of native objects that have been exposed to tiro.
The tiro runtime manages the lifetime (and the storage) of these objects, which usually includes invoking a native finalizer when the object is collected.</p><h3 id="type-nativepointer"><a class="anchor-link" href="#type-nativepointer">#</a>type NativePointer</h3><p>The type of a native pointer that has been exposed to tiro.
The tiro runtime does <em>not</em> manage these objects in any way, which makes them very cheap to use.</p><h3 id="type-type"><a class="anchor-link" href="#type-type">#</a>type Type</h3><p>The type of all types. In other words, <code>std.type_of(value)</code> will always return an instance of this type for any kind of value.</p><h3 id="func-type_of"><a class="anchor-link" href="#func-type_of">#</a>func type_of</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func type_of(v: Value): Type;</span></div></pre></div><p>Returns the type of <code>v</code>. For example:</p><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">assert(std.type_of(true) == std.Boolean);</span></div></pre></div><h2 id="containers"><a class="anchor-link" href="#containers">#</a>Containers</h2><h3 id="type-tuple"><a class="anchor-link" href="#type-tuple">#</a>type Tuple</h3><p>The type of all tuples, e.g. <code>()</code>, <code>(1,)</code> or <code>(1, 2)</code>.</p><h3 id="type-record"><a class="anchor-link" href="#type-record">#</a>type Record</h3><p>The type of all records, e.g. <code>(:)</code> or <code>(foo: &quot;bar&quot;)</code>.</p><h3 id="type-array"><a class="anchor-link" href="#type-array">#</a>type Array</h3><p>The type of all arrays, e.g. <code>[]</code> and <code>[a, b, c]</code>.</p><p>An array is a dynamic sequence of items that can grow or shrink as needed.
Existing items can be read or written using the indexing operator, e.g. <code>const first = array[0]</code> or <code>array[0] = &quot;first&quot;</code>.
The sequence of items can be manipulated using the methods below.</p><h4 id="func-arraysize"><a class="anchor-link" href="#func-arraysize">#</a>func Array.size</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Array.size(): Integer;</span></div></pre></div><p>Returns the number of items in the array.</p><h4 id="func-arrayappend"><a class="anchor-link" href="#func-arrayappend">#</a>func Array.append</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Array.append(v: Value);</span></div></pre></div><p>Appends <code>v</code> to the array.</p><h4 id="func-arrayclear"><a class="anchor-link" href="#func-arrayclear">#</a>func Array.clear</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Array.clear()</span></div></pre></div><p>Removes all items from the array.</p><h3 id="type-buffer"><a class="anchor-link" href="#type-buffer">#</a>type Buffer</h3><p>Buffers reference a raw region of memory, i.e. a blog of bytes.
They are especially useful when doing I/O or when manipulating large amounts of data.</p><p>TODO: usage</p><h4 id="func-buffersize"><a class="anchor-link" href="#func-buffersize">#</a>func Buffer.size</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Buffer.size(): Integer;</span></div></pre></div><p>Returns the number of items in the buffer.</p><h3 id="type-map"><a class="anchor-link" href="#type-map">#</a>type Map</h3><p>A map is a container that associates <em>keys</em> with <em>values</em>.
The key-value associations can be manipulated at will.
Given a key, a map allows for efficient lookup (and update) of the associated value.</p><p>Maps are implemented as <a href="https://en.wikipedia.org/wiki/Hash_table" rel="noopener noreferrer" target="_blank"><span icon="share" style="vertical-align:baseline;padding-right:4px" class="bp3-icon bp3-icon-share"><svg data-icon="share" width="12" height="12" viewBox="0 0 16 16"><desc>share</desc><path d="M10.99 13.99h-9v-9h4.76l2-2H.99c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1h11c.55 0 1-.45 1-1V7.24l-2 2v4.75zm4-14h-5c-.55 0-1 .45-1 1s.45 1 1 1h2.59L7.29 7.28a1 1 0 00-.3.71 1.003 1.003 0 001.71.71l5.29-5.29V6c0 .55.45 1 1 1s1-.45 1-1V1c0-.56-.45-1.01-1-1.01z" fill-rule="evenodd"></path></svg></span>hash tables</a>.</p><h4 id="map-insertion-order"><a class="anchor-link" href="#map-insertion-order">#</a>Insertion order</h4><p>Contrary to most other hash table implementations, tiro&#x27;s map preserves the insertion order of its mappings.
When iterating a map, keys and values are visited in the order in which they were inserted:</p><ul><li>A new key-value mapping (i.e. a key that was not already in the map) is always inserted at the end.</li><li>Updating an existing key-value mapping (i.e. key already exists in the map) does not change its order in the map.</li><li>Removing a key-value mapping preserves the order of all remaining mappings.</li></ul><span class="caption">Example: iterating over a map</span><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">import std;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">export func main() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    const m = map{};</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    m[1] = &quot;one&quot;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    m[2] = &quot;two&quot;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    m[3] = &quot;three&quot;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // Guaranteed output:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // 1 one</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // 2 two</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // 3 three</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    for (key, value) in m {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        std.print(key, value);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></pre></div><h4 id="func-mapsize"><a class="anchor-link" href="#func-mapsize">#</a>func Map.size</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Map.size(): Integer;</span></div></pre></div><p>Returns the number of key-value mappings in the map.</p><h4 id="func-mapcontains"><a class="anchor-link" href="#func-mapcontains">#</a>func Map.contains</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Map.contains(key: Value): Boolean;</span></div></pre></div><p>Returns <code>true</code> if there is a value associated with <code>key</code>, <code>false</code> otherwise.</p><h4 id="func-mapkeys"><a class="anchor-link" href="#func-mapkeys">#</a>func Map.keys</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Map.keys(): Iterable;</span></div></pre></div><p>Returns an iterable view over the keys within the map.
The iteration order is the same as the map&#x27;s order.</p><h4 id="func-mapvalues"><a class="anchor-link" href="#func-mapvalues">#</a>func Map.values</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Map.values(): Iterable;</span></div></pre></div><p>Returns an iterable view over the values within the map.
The iteration order is the same as the map&#x27;s order.</p><h4 id="func-mapclear"><a class="anchor-link" href="#func-mapclear">#</a>func Map.clear</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Map.clear();</span></div></pre></div><p>Removes all key-value mappings from the map.</p><h4 id="func-mapremove"><a class="anchor-link" href="#func-mapremove">#</a>func Map.remove</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Map.remove(key: Value);</span></div></pre></div><p>Removes the key-value mapping for <code>key</code>.
Does nothing if there is no such mapping.</p><p>TODO: Return true/false?</p><h3 id="type-set"><a class="anchor-link" href="#type-set">#</a>type Set</h3><p>A set is a container that stores unique items.
Items can be inserted or removed at will, and their existence can be tested efficiently.</p><p>Like maps, they are implemented as <a href="https://en.wikipedia.org/wiki/Hash_table" rel="noopener noreferrer" target="_blank"><span icon="share" style="vertical-align:baseline;padding-right:4px" class="bp3-icon bp3-icon-share"><svg data-icon="share" width="12" height="12" viewBox="0 0 16 16"><desc>share</desc><path d="M10.99 13.99h-9v-9h4.76l2-2H.99c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1h11c.55 0 1-.45 1-1V7.24l-2 2v4.75zm4-14h-5c-.55 0-1 .45-1 1s.45 1 1 1h2.59L7.29 7.28a1 1 0 00-.3.71 1.003 1.003 0 001.71.71l5.29-5.29V6c0 .55.45 1 1 1s1-.45 1-1V1c0-.56-.45-1.01-1-1.01z" fill-rule="evenodd"></path></svg></span>hash tables</a>.</p><h4 id="set-insertion-order"><a class="anchor-link" href="#set-insertion-order">#</a>Insertion order</h4><p>When iterating a set, its items are visited in the order they were inserted in.
See also <a href="#map-insertion-order">map insertion order</a>.</p><h4 id="func-setsize"><a class="anchor-link" href="#func-setsize">#</a>func Set.size</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Set.size(): Integer;</span></div></pre></div><p>Returns the number of items in the set.</p><h4 id="func-setcontains"><a class="anchor-link" href="#func-setcontains">#</a>func Set.contains</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Set.contains(item: Value): Boolean;</span></div></pre></div><p>Returns <code>true</code> if the set contains <code>item</code>, <code>false</code> otherwise.</p><h4 id="func-setclear"><a class="anchor-link" href="#func-setclear">#</a>func Set.clear</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Set.clear();</span></div></pre></div><p>Removes all items from the set.</p><h4 id="func-setinsert"><a class="anchor-link" href="#func-setinsert">#</a>func Set.insert</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Set.insert(item: Value): Boolean;</span></div></pre></div><p>Inserts <code>item</code> into the set.
Returns <code>true</code> if item has been inserted, <code>false</code> if it already existed.</p><h4 id="func-setremove"><a class="anchor-link" href="#func-setremove">#</a>func Set.remove</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Set.remove(item: Value);</span></div></pre></div><p>Removes <code>item</code> from the set.
Does nothing if <code>item</code> does not exist in the set.</p><p>TODO: Return true/false?</p><h2 id="strings"><a class="anchor-link" href="#strings">#</a>Strings</h2><h3 id="type-string"><a class="anchor-link" href="#type-string">#</a>type String</h3><p>The type of all string expressions.
Strings are immutable.</p><p>TODO: Unicode strings</p><p>TODO: Internal representation is guaranteed to be UTF-8</p><h3 id="type-stringslice"><a class="anchor-link" href="#type-stringslice">#</a>type StringSlice</h3><h3 id="type-stringbuilder"><a class="anchor-link" href="#type-stringbuilder">#</a>type StringBuilder</h3><h3 id="func-new_string_builder"><a class="anchor-link" href="#func-new_string_builder">#</a>func new_string_builder</h3><h3 id="func-debug_repr"><a class="anchor-link" href="#func-debug_repr">#</a>func debug_repr</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func debug_repr(value: Value, pretty = false: Boolean): String;</span></div></pre></div><p>Returns a debug representation of the given value as a string.
When the optional <code>pretty</code> parameter is true, then the value will be pretty printed.</p><h2 id="floating-point-math"><a class="anchor-link" href="#floating-point-math">#</a>Floating point math</h2><p>Basic constants and functions for math operations on floating point numbers (<code>type Float</code>).</p><p>All functions return floating point values on success.
Input arguments may also be integers, these are then converted to floats internally.</p><h3 id="const-pi"><a class="anchor-link" href="#const-pi">#</a>const PI</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">const PI: Float;</span></div></pre></div><p>The approximate value of the circle constant Pi.</p><h3 id="const-tau"><a class="anchor-link" href="#const-tau">#</a>const TAU</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">const TAU: Float;</span></div></pre></div><p>The approximate value of the circle constant Tau (2𝜋).</p><h3 id="const-e"><a class="anchor-link" href="#const-e">#</a>const E</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">const E: Float;</span></div></pre></div><p>The approximate value of Euler&#x27;s constant <em>e</em>.</p><h3 id="const-infinity"><a class="anchor-link" href="#const-infinity">#</a>const INFINITY</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">const INFINITY: Float;</span></div></pre></div><p>The floating point value of positive infinity.</p><h3 id="func-abs"><a class="anchor-link" href="#func-abs">#</a>func abs</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func abs(x: Float | Integer): Float;</span></div></pre></div><p>Returns the absolute value of <code>x</code>, i.e. <code>|x|</code>.</p><h3 id="func-pow"><a class="anchor-link" href="#func-pow">#</a>func pow</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func pow(a: Float | Integer, b: Float | Integer): Float;</span></div></pre></div><p>Returns <code>a</code> raised to the power <code>b</code>.</p><h3 id="func-log"><a class="anchor-link" href="#func-log">#</a>func log</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func log(x: Float | Integer): Float;</span></div></pre></div><p>Returns the natural logarithm (base <em>e</em>) of <code>x</code>.</p><h3 id="func-sqrt"><a class="anchor-link" href="#func-sqrt">#</a>func sqrt</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func sqrt(x: Float | Integer): Float;</span></div></pre></div><p>Returns the square root of <code>x</code>.</p><h3 id="func-round"><a class="anchor-link" href="#func-round">#</a>func round</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func round(x: Float | Integer): Float;</span></div></pre></div><p>Returns the nearest integral value to <code>x</code>.</p><h3 id="func-ceil"><a class="anchor-link" href="#func-ceil">#</a>func ceil</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func ceil(x: Float | Integer): Float;</span></div></pre></div><p>Returns the smallest integral floating point value that is greater than or equal to <code>x</code>.</p><h3 id="func-floor"><a class="anchor-link" href="#func-floor">#</a>func floor</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func floor(x: Float | Integer): Float;</span></div></pre></div><p>Returns the largest integral floating point value that is less than or equal to <code>x</code>.</p><h3 id="func-sin"><a class="anchor-link" href="#func-sin">#</a>func sin</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func sin(x: Float | Integer): Float;</span></div></pre></div><p>Returns the sine of <code>x</code>.
<code>x</code> must be an angle in radians.</p><h3 id="func-cos"><a class="anchor-link" href="#func-cos">#</a>func cos</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func cos(x: Float | Integer): Float;</span></div></pre></div><p>Returns the cosine of <code>x</code>.
<code>x</code> must be an angle in radians.</p><h3 id="func-tan"><a class="anchor-link" href="#func-tan">#</a>func tan</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func tan(x: Float | Integer): Float;</span></div></pre></div><p>Returns the tangent of <code>x</code>.
<code>x</code> must be an angle in radians.</p><h3 id="func-asin"><a class="anchor-link" href="#func-asin">#</a>func asin</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func asin(x: Float | Integer): Float;</span></div></pre></div><p>Returns the inverse sine of <code>x</code> in radians.</p><h3 id="func-acos"><a class="anchor-link" href="#func-acos">#</a>func acos</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func acos(x: Float | Integer): Float;</span></div></pre></div><p>Returns the inverse cosine of <code>x</code> in radians.</p><h3 id="func-atan"><a class="anchor-link" href="#func-atan">#</a>func atan</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func atan(x: Float | Integer): Float;</span></div></pre></div><p>Returns the inverse tangent of <code>x</code> in radians.</p><h2 id="input-and-output"><a class="anchor-link" href="#input-and-output">#</a>Input and output</h2><h3 id="func-print"><a class="anchor-link" href="#func-print">#</a>func print</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func print(values...: Value...);</span></div></pre></div><p>Prints the given values followed by a new line.</p><h3 id="func-loop_timestamp"><a class="anchor-link" href="#func-loop_timestamp">#</a>func loop_timestamp</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func loop_timestamp(): Integer;</span></div></pre></div><p>Returns the current loop timestamp.</p><p>The returned value is the number of <em>milliseconds</em> since some arbitrary starting point - usually the start of the program - until the start of the current main loop iteration.
The value is guaranteed to be <em>monotonic</em>, i.e. it will never decrease.</p><p>The loop timestamp is refreshed on every iteration of the runtime&#x27;s main loop.
A single iteration involves calling all ready coroutines and continues until all coroutines are either done or waiting for the completion of an asynchronous function.</p><p>Within the same iteration, <code>loop_timestamp()</code> will always return the same value.</p><h2 id="coroutines"><a class="anchor-link" href="#coroutines">#</a>Coroutines</h2><p>Tiro&#x27;s coroutines implement <a href="https://en.wikipedia.org/wiki/Cooperative_multitasking" rel="noopener noreferrer" target="_blank"><span icon="share" style="vertical-align:baseline;padding-right:4px" class="bp3-icon bp3-icon-share"><svg data-icon="share" width="12" height="12" viewBox="0 0 16 16"><desc>share</desc><path d="M10.99 13.99h-9v-9h4.76l2-2H.99c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1h11c.55 0 1-.45 1-1V7.24l-2 2v4.75zm4-14h-5c-.55 0-1 .45-1 1s.45 1 1 1h2.59L7.29 7.28a1 1 0 00-.3.71 1.003 1.003 0 001.71.71l5.29-5.29V6c0 .55.45 1 1 1s1-.45 1-1V1c0-.56-.45-1.01-1-1.01z" fill-rule="evenodd"></path></svg></span>cooperative multitasking</a> within a shared operating system thread.
This means that a coroutine will continue running until it gives up control voluntarily.
It will never be preempted by a scheduler behind the scenes.</p><p>In order to give up control (also called <em>yielding</em>), a coroutine can perform one of the following actions:</p><ul><li><p>Call an asynchronous function.
Asynchronous functions usually yield behind the scenes automatically, transparent to the caller.
They can be implemented in native code or by using the the <a href="#func-yield_coroutine">yield_coroutine()</a> function (like the function <code>lock()</code> in the <a href="#mutex-example">mutex example</a>).</p><p>While an asynchronous function waits for its completion, other coroutines can execute on the shared operating system thread.</p></li><li><p>Call <a href="#func-dispatch">dispatch()</a>.
Other coroutines that are ready to execute will have the chance to run.
The current coroutine will resume execution once those coroutines have yielded.</p><p>It can be useful to invoke <code>dispatch()</code> in potentially long loops to avoid blocking the system for too long.</p></li><li><p>Call <a href="#func-yield_coroutine">yield_coroutine()</a>.
This will stop the coroutine until it has been manually resumed by another coroutine.
Care must be taken when using this primitive function!</p></li></ul><h3 id="type-coroutine"><a class="anchor-link" href="#type-coroutine">#</a>type Coroutine</h3><p>Coroutines represent lightweight threads of execution within a single operating system thread.
They are created through the native API or by calling <code>std.launch()</code>.</p><h3 id="type-coroutinetoken"><a class="anchor-link" href="#type-coroutinetoken">#</a>type CoroutineToken</h3><h3 id="func-current_coroutine"><a class="anchor-link" href="#func-current_coroutine">#</a>func current_coroutine</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func current_coroutine(): Coroutine;</span></div></pre></div><p>Returns the current <a href="#type-coroutine">Coroutine</a> instance, i.e. the coroutine from which <code>current_coroutine()</code> was called.</p><h3 id="func-launch"><a class="anchor-link" href="#func-launch">#</a>func launch</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func launch(fn: Function, args...: Value...): Coroutine;</span></div></pre></div><p>Executes <code>fn(args...)</code> from within a new coroutine.
The coroutine instance is returned by this function.</p><p>TODO: Should we return a future instead?</p><h3 id="func-dispatch"><a class="anchor-link" href="#func-dispatch">#</a>func dispatch</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func dispatch();</span></div></pre></div><p>Dispatches to other ready coroutines.
The current coroutine will resume execution after all other ready coroutines had the opportunity to run.</p><h3 id="func-coroutine_token"><a class="anchor-link" href="#func-coroutine_token">#</a>func coroutine_token</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func coroutine_token(): CoroutineToken;</span></div></pre></div><p>Returns a <a href="#type-coroutinetoken">CoroutineToken</a> instance suitable for resuming the current coroutine.
Coroutine tokens are invalidated after the coroutine has been resumed again.
See <a href="#func-yield_coroutine">yield_coroutine()</a> for an example.</p><p>WARNING: This is a low level API designed to control the execution of a coroutine manually.
It should only be used to create new asynchronous abstractions.</p><h3 id="func-yield_coroutine"><a class="anchor-link" href="#func-yield_coroutine">#</a>func yield_coroutine</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func yield_coroutine();</span></div></pre></div><p>Immediately pauses execution of the current coroutine.
Execution will only continue once the coroutine has been resumed via a <a href="#type-coroutinetoken">CoroutineToken</a> previously obtained from <a href="#func-coroutine_token">coroutine_token()</a>.</p><p>WARNING: This is a low level API designed to control the execution of a coroutine manually.
It should only be used to create new asynchronous abstractions.</p><a id="mutex-example"></a><span class="caption">Example: a simple Mutex</span><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">import std;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">export func main() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    const mutex = createMutex();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    const task = func(id) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        for var i = 0; i &lt; 3; i += 1 {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            mutex.lock();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            std.print(&quot;Hello from ${id}&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            std.dispatch(); // Other coroutine can observe a locked mutex</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            mutex.unlock();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    };</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    std.launch(task, &quot;1&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    std.launch(task, &quot;2&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">// Creates a simplistic mutex that only supports two coroutines.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">func createMutex() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // Coroutine token if another coroutine is already waiting.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var waiter = null;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var locked = false;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    return (</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        lock: func() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            if locked {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                if waiter != null {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                    std.panic(&quot;Cannot support more than one waiter&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                // Wait until the other coroutine unlocks.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                waiter = std.coroutine_token();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                std.yield_coroutine();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            // At this point, either the mutex wasn&#x27;t initially locked</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            // or yield_coroutine() returned, i.e. the other coroutine unlocked.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            assert(!locked);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            locked = true;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        unlock: func() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            if !locked {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                std.panic(&quot;Mutex was not locked&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            locked = false;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            if waiter {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                waiter.resume();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                waiter = null;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            // Give other coroutines the opportunity to run</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            std.dispatch();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></pre></div><h2 id="error-handling"><a class="anchor-link" href="#error-handling">#</a>Error handling</h2><h3 id="type-result"><a class="anchor-link" href="#type-result">#</a>type Result</h3><p>A result represents the result of an operation that may fail.
The result type is the basic primitive type used in tiro&#x27;s error handling facilities.</p><p>Results may be in one of two states:</p><ul><li><p><em>Success</em>. Calling <code>result.value()</code> returns the result of the operation.</p></li><li><p><em>Failure</em>. Calling <code>result.reason()</code> returns a value explaining why the operation failed.</p></li></ul><p>Results are constructed by calling the <a href="#func-success">success()</a> and <a href="#func-failure">failure()</a> functions.</p><span class="caption">Example: simple error handling</span><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">import std;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">export func main() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    const result1 = operation(5);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    std.print(result1.type(), result1.value()); // #success 10</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    const result2 = operation(-5);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    std.print(result2.type(), result2.reason()); // #failure value too small!</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">func operation(n) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">     if (n &lt; 0) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return std.failure(&quot;value too small!&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    } else {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return std.success(n * 2);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></pre></div><h4 id="func-resulttype"><a class="anchor-link" href="#func-resulttype">#</a>func Result.type</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Result.type(): Symbol;</span></div></pre></div><p>Returns either <code>#success</code> or <code>#failure</code>, depending on the result&#x27;s state.</p><h4 id="func-resultis_success"><a class="anchor-link" href="#func-resultis_success">#</a>func Result.is_success</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Result.is_success(): Boolean;</span></div></pre></div><p>Returns <code>true</code> if the result represents success, <code>false</code> otherwise.</p><h4 id="func-resultis_failure"><a class="anchor-link" href="#func-resultis_failure">#</a>func Result.is_failure</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Result.is_failure(): Boolean;</span></div></pre></div><p>Returns <code>true</code> if the result represents failure, <code>false</code> otherwise.</p><h4 id="func-resultvalue"><a class="anchor-link" href="#func-resultvalue">#</a>func Result.value</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Result.value(): Value;</span></div></pre></div><p>Returns the result&#x27;s value.
Requires that the result represents success.</p><h4 id="func-resultreason"><a class="anchor-link" href="#func-resultreason">#</a>func Result.reason</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Result.reason(): Value;</span></div></pre></div><p>Returns the result&#x27;s reason.
Requires that the result represents failure.</p><h3 id="func-success"><a class="anchor-link" href="#func-success">#</a>func success</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func success(value: Value): Result;</span></div></pre></div><p>Returns a new successful <a href="#type-result">Result</a> that holds the given <code>value</code>.</p><h3 id="func-failure"><a class="anchor-link" href="#func-failure">#</a>func failure</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func failure(reason: value): Result;</span></div></pre></div><p>Returns a new failure <a href="#type-result">Result</a> that holds the given <code>reason</code>.</p><h3 id="type-exception"><a class="anchor-link" href="#type-exception">#</a>type Exception</h3><p>Exceptions represent unexpected (and often fatal) errors encountered during program execution.
They are generated when code panics, for example by calling <a href="#func-panic">panic()</a>.</p><p>It is often preferable to use the less intrusive <a href="#type-result">Result</a> type instead.
Panicking should be reserved for signaling critical error conditions such as programming errors.</p><p>TODO: Other properties (stack trace, user data, secondary exceptions)</p><h4 id="func-exceptionmessage"><a class="anchor-link" href="#func-exceptionmessage">#</a>func Exception.message</h4><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func Exception.message(): String;</span></div></pre></div><p>Returns the exception&#x27;s error message.</p><h3 id="func-panic"><a class="anchor-link" href="#func-panic">#</a>func panic</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func panic(message: String);</span></div></pre></div><p>Immediately aborts execution of the current function with an error explained by <code>message</code>.
From within the <code>panic</code> function, a new <a href="#type-exception">Exception</a> is constructed with the given <code>message</code> and <a href="https://en.wikipedia.org/wiki/Call_stack#Unwinding" rel="noopener noreferrer" target="_blank"><span icon="share" style="vertical-align:baseline;padding-right:4px" class="bp3-icon bp3-icon-share"><svg data-icon="share" width="12" height="12" viewBox="0 0 16 16"><desc>share</desc><path d="M10.99 13.99h-9v-9h4.76l2-2H.99c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1h11c.55 0 1-.45 1-1V7.24l-2 2v4.75zm4-14h-5c-.55 0-1 .45-1 1s.45 1 1 1h2.59L7.29 7.28a1 1 0 00-.3.71 1.003 1.003 0 001.71.71l5.29-5.29V6c0 .55.45 1 1 1s1-.45 1-1V1c0-.56-.45-1.01-1-1.01z" fill-rule="evenodd"></path></svg></span>stack unwinding</a> is started.
Unwinding can be stopped by using the <a href="#func-catch_panic">catch_panic</a> function.</p><p>This function is designed to report <em>unexpected</em> errors such as programming errors.
Use the <a href="#type-result">Result</a> type instead if errors can be expected, e.g. to report missing files.</p><h3 id="func-catch_panic"><a class="anchor-link" href="#func-catch_panic">#</a>func catch_panic</h3><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">func catch_panic(fn: Function): Result;</span></div></pre></div><p>Invokes <code>fn()</code> and stops propagation of any non-fatal panic thrown by <code>fn</code> or its callees.
After execution of <code>fn()</code> completes (either through panic or through normal return), a <a href="#type-result">Result</a> is returned:</p><ul><li>If <code>fn</code> returned normally, its return value is wrapped into a success result and returned.</li><li>If a panic was caught, a failure result is returned. The result&#x27;s <code>reason</code> is set to the caught value.</li></ul><span class="caption">Example: catching a panic from a function</span><div><pre class="prism-code language-plain" style="color:#393A34;background-color:#f6f8fa;padding:10px"><div class="token-line" style="color:#393A34"><span class="token plain">import std;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">export func main() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    const result = std.catch_panic(may_fail);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    if (result.is_success()) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        std.print(&quot;success:&quot;, result.value());</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    } else {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        std.print(&quot;failure:&quot;, result.reason().message());</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">func may_fail() {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // Replace `false` with `true` to return normally</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    if (false) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return 42;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    } else {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        std.panic(&quot;help!&quot;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></pre></div></article></div></main></div> </div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"stdlib","frontMatter":{"title":"The standard library","slug":"/stdlib"},"mdx":{"compiledSource":"var u=Object.defineProperty,h=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var l=(a,n,t)=\u003en in a?u(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=\u003e{for(var t in n||(n={}))p.call(n,t)\u0026\u0026l(a,t,n[t]);if(i)for(var t of i(n))o.call(n,t)\u0026\u0026l(a,t,n[t]);return a},s=(a,n)=\u003eh(a,m(n));var c=(a,n)=\u003e{var t={};for(var r in a)p.call(a,r)\u0026\u0026n.indexOf(r)\u003c0\u0026\u0026(t[r]=a[r]);if(a!=null\u0026\u0026i)for(var r of i(a))n.indexOf(r)\u003c0\u0026\u0026o.call(a,r)\u0026\u0026(t[r]=a[r]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var r=t,{components:a}=r,n=c(r,[\"components\"]);return mdx(MDXLayout,s(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{id:\"the-standard-library\"}),mdx(\"a\",e({parentName:\"h1\"},{className:\"anchor-link\",href:\"#the-standard-library\"}),\"#\"),\"The standard library\"),mdx(\"p\",null,\"Basic types and functions provided by the runtime.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`import std;\n`)),mdx(\"h2\",e({},{id:\"contents\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#contents\"}),\"#\"),\"Contents\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#basic-types-and-functions\"}),\"Basic types and functions\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-boolean\"}),\"type Boolean\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-integer\"}),\"type Integer\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-float\"}),\"type Float\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-null\"}),\"type Null\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-symbol\"}),\"type Symbol\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-function\"}),\"type Function\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-module\"}),\"type Module\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-nativeobject\"}),\"type NativeObject\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-nativepointer\"}),\"type NativePointer\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-type\"}),\"type Type\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-type_of\"}),\"func type_of\")))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#containers\"}),\"Containers\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-tuple\"}),\"type Tuple\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-record\"}),\"type Record\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-array\"}),\"type Array\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-buffer\"}),\"type Buffer\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-map\"}),\"type Map\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-set\"}),\"type Set\")))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#strings\"}),\"Strings\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-string\"}),\"type String\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-stringslice\"}),\"type StringSlice\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-stringbuilder\"}),\"type StringBuilder\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-new_string_builder\"}),\"func new_string_builder\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-debug_repr\"}),\"func debug_repr\")))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#floating-point-math\"}),\"Floating point math\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#const-pi\"}),\"const PI\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#const-tau\"}),\"const TAU\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#const-e\"}),\"const E\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-abs\"}),\"func abs\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-pow\"}),\"func pow\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-log\"}),\"func log\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-sqrt\"}),\"func sqrt\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-round\"}),\"func round\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-ceil\"}),\"func ceil\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-floor\"}),\"func floor\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-sin\"}),\"func sin\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-cos\"}),\"func cos\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-tan\"}),\"func tan\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-asin\"}),\"func asin\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-acos\"}),\"func acos\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-atan\"}),\"func atan\")))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#input-and-output\"}),\"Input and output\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-print\"}),\"func print\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-loop_timestamp\"}),\"func loop_timestamp\")))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#coroutines\"}),\"Coroutines\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-coroutine\"}),\"type Coroutine\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-coroutinetoken\"}),\"type CoroutineToken\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-current_coroutine\"}),\"func current_coroutine\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-launch\"}),\"func launch\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-dispatch\"}),\"func dispatch\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-coroutine_token\"}),\"func coroutine_token\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-yield_coroutine\"}),\"func yield_coroutine\")))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"a\",e({parentName:\"p\"},{href:\"#error-handling\"}),\"Error handling\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-result\"}),\"type Result\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-success\"}),\"func success\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-failure\"}),\"func failure\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#type-exception\"}),\"type Exception\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-panic\"}),\"func panic\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"#func-catch_panic\"}),\"func catch_panic\"))))),mdx(\"h2\",e({},{id:\"basic-types-and-functions\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#basic-types-and-functions\"}),\"#\"),\"Basic types and functions\"),mdx(\"h3\",e({},{id:\"type-boolean\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-boolean\"}),\"#\"),\"type Boolean\"),mdx(\"p\",null,\"The type of \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\".\"),mdx(\"h3\",e({},{id:\"type-integer\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-integer\"}),\"#\"),\"type Integer\"),mdx(\"p\",null,\"The type of integer expressions such as \",mdx(\"inlineCode\",{parentName:\"p\"},\"7\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"0x1F\"),\".\"),mdx(\"h3\",e({},{id:\"type-float\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-float\"}),\"#\"),\"type Float\"),mdx(\"p\",null,\"Type type of floating point expressions such as \",mdx(\"inlineCode\",{parentName:\"p\"},\"1.25\"),\".\"),mdx(\"h3\",e({},{id:\"type-null\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-null\"}),\"#\"),\"type Null\"),mdx(\"p\",null,\"The type of the constant \",mdx(\"inlineCode\",{parentName:\"p\"},\"null\"),\".\"),mdx(\"h3\",e({},{id:\"type-symbol\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-symbol\"}),\"#\"),\"type Symbol\"),mdx(\"p\",null,\"The type of symbol literals, e.g. \",mdx(\"inlineCode\",{parentName:\"p\"},\"#answer\"),\".\"),mdx(\"h3\",e({},{id:\"type-function\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-function\"}),\"#\"),\"type Function\"),mdx(\"p\",null,\"The type of all functions.\"),mdx(\"h3\",e({},{id:\"type-module\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-module\"}),\"#\"),\"type Module\"),mdx(\"p\",null,\"The type of all modules:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`import std;\n// std.type_of(std) == std.Module\n`)),mdx(\"h3\",e({},{id:\"type-nativeobject\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-nativeobject\"}),\"#\"),\"type NativeObject\"),mdx(\"p\",null,`The type of native objects that have been exposed to tiro.\nThe tiro runtime manages the lifetime (and the storage) of these objects, which usually includes invoking a native finalizer when the object is collected.`),mdx(\"h3\",e({},{id:\"type-nativepointer\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-nativepointer\"}),\"#\"),\"type NativePointer\"),mdx(\"p\",null,`The type of a native pointer that has been exposed to tiro.\nThe tiro runtime does `,mdx(\"em\",{parentName:\"p\"},\"not\"),\" manage these objects in any way, which makes them very cheap to use.\"),mdx(\"h3\",e({},{id:\"type-type\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-type\"}),\"#\"),\"type Type\"),mdx(\"p\",null,\"The type of all types. In other words, \",mdx(\"inlineCode\",{parentName:\"p\"},\"std.type_of(value)\"),\" will always return an instance of this type for any kind of value.\"),mdx(\"h3\",e({},{id:\"func-type_of\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-type_of\"}),\"#\"),\"func type_of\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func type_of(v: Value): Type;\n`)),mdx(\"p\",null,\"Returns the type of \",mdx(\"inlineCode\",{parentName:\"p\"},\"v\"),\". For example:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`assert(std.type_of(true) == std.Boolean);\n`)),mdx(\"h2\",e({},{id:\"containers\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#containers\"}),\"#\"),\"Containers\"),mdx(\"h3\",e({},{id:\"type-tuple\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-tuple\"}),\"#\"),\"type Tuple\"),mdx(\"p\",null,\"The type of all tuples, e.g. \",mdx(\"inlineCode\",{parentName:\"p\"},\"()\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"(1,)\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"(1, 2)\"),\".\"),mdx(\"h3\",e({},{id:\"type-record\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-record\"}),\"#\"),\"type Record\"),mdx(\"p\",null,\"The type of all records, e.g. \",mdx(\"inlineCode\",{parentName:\"p\"},\"(:)\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},'(foo: \"bar\")'),\".\"),mdx(\"h3\",e({},{id:\"type-array\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-array\"}),\"#\"),\"type Array\"),mdx(\"p\",null,\"The type of all arrays, e.g. \",mdx(\"inlineCode\",{parentName:\"p\"},\"[]\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"[a, b, c]\"),\".\"),mdx(\"p\",null,`An array is a dynamic sequence of items that can grow or shrink as needed.\nExisting items can be read or written using the indexing operator, e.g. `,mdx(\"inlineCode\",{parentName:\"p\"},\"const first = array[0]\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},'array[0] = \"first\"'),`.\nThe sequence of items can be manipulated using the methods below.`),mdx(\"h4\",e({},{id:\"func-arraysize\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-arraysize\"}),\"#\"),\"func Array.size\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Array.size(): Integer;\n`)),mdx(\"p\",null,\"Returns the number of items in the array.\"),mdx(\"h4\",e({},{id:\"func-arrayappend\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-arrayappend\"}),\"#\"),\"func Array.append\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Array.append(v: Value);\n`)),mdx(\"p\",null,\"Appends \",mdx(\"inlineCode\",{parentName:\"p\"},\"v\"),\" to the array.\"),mdx(\"h4\",e({},{id:\"func-arrayclear\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-arrayclear\"}),\"#\"),\"func Array.clear\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Array.clear()\n`)),mdx(\"p\",null,\"Removes all items from the array.\"),mdx(\"h3\",e({},{id:\"type-buffer\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-buffer\"}),\"#\"),\"type Buffer\"),mdx(\"p\",null,`Buffers reference a raw region of memory, i.e. a blog of bytes.\nThey are especially useful when doing I/O or when manipulating large amounts of data.`),mdx(\"p\",null,\"TODO: usage\"),mdx(\"h4\",e({},{id:\"func-buffersize\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-buffersize\"}),\"#\"),\"func Buffer.size\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Buffer.size(): Integer;\n`)),mdx(\"p\",null,\"Returns the number of items in the buffer.\"),mdx(\"h3\",e({},{id:\"type-map\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-map\"}),\"#\"),\"type Map\"),mdx(\"p\",null,\"A map is a container that associates \",mdx(\"em\",{parentName:\"p\"},\"keys\"),\" with \",mdx(\"em\",{parentName:\"p\"},\"values\"),`.\nThe key-value associations can be manipulated at will.\nGiven a key, a map allows for efficient lookup (and update) of the associated value.`),mdx(\"p\",null,\"Maps are implemented as \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Hash_table\"}),\"hash tables\"),\".\"),mdx(\"h4\",e({},{id:\"map-insertion-order\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#map-insertion-order\"}),\"#\"),\"Insertion order\"),mdx(\"p\",null,`Contrary to most other hash table implementations, tiro's map preserves the insertion order of its mappings.\nWhen iterating a map, keys and values are visited in the order in which they were inserted:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"A new key-value mapping (i.e. a key that was not already in the map) is always inserted at the end.\"),mdx(\"li\",{parentName:\"ul\"},\"Updating an existing key-value mapping (i.e. key already exists in the map) does not change its order in the map.\"),mdx(\"li\",{parentName:\"ul\"},\"Removing a key-value mapping preserves the order of all remaining mappings.\")),mdx(\"span\",{className:\"caption\"},\"Example: iterating over a map\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`import std;\n\nexport func main() {\n    const m = map{};\n    m[1] = \"one\";\n    m[2] = \"two\";\n    m[3] = \"three\";\n\n    // Guaranteed output:\n    // 1 one\n    // 2 two\n    // 3 three\n    for (key, value) in m {\n        std.print(key, value);\n    }\n}\n`)),mdx(\"h4\",e({},{id:\"func-mapsize\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-mapsize\"}),\"#\"),\"func Map.size\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Map.size(): Integer;\n`)),mdx(\"p\",null,\"Returns the number of key-value mappings in the map.\"),mdx(\"h4\",e({},{id:\"func-mapcontains\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-mapcontains\"}),\"#\"),\"func Map.contains\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Map.contains(key: Value): Boolean;\n`)),mdx(\"p\",null,\"Returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" if there is a value associated with \",mdx(\"inlineCode\",{parentName:\"p\"},\"key\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\" otherwise.\"),mdx(\"h4\",e({},{id:\"func-mapkeys\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-mapkeys\"}),\"#\"),\"func Map.keys\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Map.keys(): Iterable;\n`)),mdx(\"p\",null,`Returns an iterable view over the keys within the map.\nThe iteration order is the same as the map's order.`),mdx(\"h4\",e({},{id:\"func-mapvalues\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-mapvalues\"}),\"#\"),\"func Map.values\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Map.values(): Iterable;\n`)),mdx(\"p\",null,`Returns an iterable view over the values within the map.\nThe iteration order is the same as the map's order.`),mdx(\"h4\",e({},{id:\"func-mapclear\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-mapclear\"}),\"#\"),\"func Map.clear\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Map.clear();\n`)),mdx(\"p\",null,\"Removes all key-value mappings from the map.\"),mdx(\"h4\",e({},{id:\"func-mapremove\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-mapremove\"}),\"#\"),\"func Map.remove\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Map.remove(key: Value);\n`)),mdx(\"p\",null,\"Removes the key-value mapping for \",mdx(\"inlineCode\",{parentName:\"p\"},\"key\"),`.\nDoes nothing if there is no such mapping.`),mdx(\"p\",null,\"TODO: Return true/false?\"),mdx(\"h3\",e({},{id:\"type-set\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-set\"}),\"#\"),\"type Set\"),mdx(\"p\",null,`A set is a container that stores unique items.\nItems can be inserted or removed at will, and their existence can be tested efficiently.`),mdx(\"p\",null,\"Like maps, they are implemented as \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Hash_table\"}),\"hash tables\"),\".\"),mdx(\"h4\",e({},{id:\"set-insertion-order\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#set-insertion-order\"}),\"#\"),\"Insertion order\"),mdx(\"p\",null,`When iterating a set, its items are visited in the order they were inserted in.\nSee also `,mdx(\"a\",e({parentName:\"p\"},{href:\"#map-insertion-order\"}),\"map insertion order\"),\".\"),mdx(\"h4\",e({},{id:\"func-setsize\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-setsize\"}),\"#\"),\"func Set.size\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Set.size(): Integer;\n`)),mdx(\"p\",null,\"Returns the number of items in the set.\"),mdx(\"h4\",e({},{id:\"func-setcontains\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-setcontains\"}),\"#\"),\"func Set.contains\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Set.contains(item: Value): Boolean;\n`)),mdx(\"p\",null,\"Returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" if the set contains \",mdx(\"inlineCode\",{parentName:\"p\"},\"item\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\" otherwise.\"),mdx(\"h4\",e({},{id:\"func-setclear\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-setclear\"}),\"#\"),\"func Set.clear\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Set.clear();\n`)),mdx(\"p\",null,\"Removes all items from the set.\"),mdx(\"h4\",e({},{id:\"func-setinsert\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-setinsert\"}),\"#\"),\"func Set.insert\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Set.insert(item: Value): Boolean;\n`)),mdx(\"p\",null,\"Inserts \",mdx(\"inlineCode\",{parentName:\"p\"},\"item\"),` into the set.\nReturns `,mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" if item has been inserted, \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\" if it already existed.\"),mdx(\"h4\",e({},{id:\"func-setremove\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-setremove\"}),\"#\"),\"func Set.remove\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Set.remove(item: Value);\n`)),mdx(\"p\",null,\"Removes \",mdx(\"inlineCode\",{parentName:\"p\"},\"item\"),` from the set.\nDoes nothing if `,mdx(\"inlineCode\",{parentName:\"p\"},\"item\"),\" does not exist in the set.\"),mdx(\"p\",null,\"TODO: Return true/false?\"),mdx(\"h2\",e({},{id:\"strings\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#strings\"}),\"#\"),\"Strings\"),mdx(\"h3\",e({},{id:\"type-string\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-string\"}),\"#\"),\"type String\"),mdx(\"p\",null,`The type of all string expressions.\nStrings are immutable.`),mdx(\"p\",null,\"TODO: Unicode strings\"),mdx(\"p\",null,\"TODO: Internal representation is guaranteed to be UTF-8\"),mdx(\"h3\",e({},{id:\"type-stringslice\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-stringslice\"}),\"#\"),\"type StringSlice\"),mdx(\"h3\",e({},{id:\"type-stringbuilder\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-stringbuilder\"}),\"#\"),\"type StringBuilder\"),mdx(\"h3\",e({},{id:\"func-new_string_builder\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-new_string_builder\"}),\"#\"),\"func new_string_builder\"),mdx(\"h3\",e({},{id:\"func-debug_repr\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-debug_repr\"}),\"#\"),\"func debug_repr\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func debug_repr(value: Value, pretty = false: Boolean): String;\n`)),mdx(\"p\",null,`Returns a debug representation of the given value as a string.\nWhen the optional `,mdx(\"inlineCode\",{parentName:\"p\"},\"pretty\"),\" parameter is true, then the value will be pretty printed.\"),mdx(\"h2\",e({},{id:\"floating-point-math\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#floating-point-math\"}),\"#\"),\"Floating point math\"),mdx(\"p\",null,\"Basic constants and functions for math operations on floating point numbers (\",mdx(\"inlineCode\",{parentName:\"p\"},\"type Float\"),\").\"),mdx(\"p\",null,`All functions return floating point values on success.\nInput arguments may also be integers, these are then converted to floats internally.`),mdx(\"h3\",e({},{id:\"const-pi\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#const-pi\"}),\"#\"),\"const PI\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`const PI: Float;\n`)),mdx(\"p\",null,\"The approximate value of the circle constant Pi.\"),mdx(\"h3\",e({},{id:\"const-tau\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#const-tau\"}),\"#\"),\"const TAU\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`const TAU: Float;\n`)),mdx(\"p\",null,\"The approximate value of the circle constant Tau (2\\u{1D70B}).\"),mdx(\"h3\",e({},{id:\"const-e\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#const-e\"}),\"#\"),\"const E\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`const E: Float;\n`)),mdx(\"p\",null,\"The approximate value of Euler's constant \",mdx(\"em\",{parentName:\"p\"},\"e\"),\".\"),mdx(\"h3\",e({},{id:\"const-infinity\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#const-infinity\"}),\"#\"),\"const INFINITY\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`const INFINITY: Float;\n`)),mdx(\"p\",null,\"The floating point value of positive infinity.\"),mdx(\"h3\",e({},{id:\"func-abs\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-abs\"}),\"#\"),\"func abs\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func abs(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the absolute value of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\", i.e. \",mdx(\"inlineCode\",{parentName:\"p\"},\"|x|\"),\".\"),mdx(\"h3\",e({},{id:\"func-pow\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-pow\"}),\"#\"),\"func pow\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func pow(a: Float | Integer, b: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"a\"),\" raised to the power \",mdx(\"inlineCode\",{parentName:\"p\"},\"b\"),\".\"),mdx(\"h3\",e({},{id:\"func-log\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-log\"}),\"#\"),\"func log\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func log(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the natural logarithm (base \",mdx(\"em\",{parentName:\"p\"},\"e\"),\") of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\".\"),mdx(\"h3\",e({},{id:\"func-sqrt\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-sqrt\"}),\"#\"),\"func sqrt\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func sqrt(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the square root of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\".\"),mdx(\"h3\",e({},{id:\"func-round\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-round\"}),\"#\"),\"func round\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func round(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the nearest integral value to \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\".\"),mdx(\"h3\",e({},{id:\"func-ceil\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-ceil\"}),\"#\"),\"func ceil\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func ceil(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the smallest integral floating point value that is greater than or equal to \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\".\"),mdx(\"h3\",e({},{id:\"func-floor\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-floor\"}),\"#\"),\"func floor\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func floor(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the largest integral floating point value that is less than or equal to \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\".\"),mdx(\"h3\",e({},{id:\"func-sin\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-sin\"}),\"#\"),\"func sin\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func sin(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the sine of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),`.\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\" must be an angle in radians.\"),mdx(\"h3\",e({},{id:\"func-cos\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-cos\"}),\"#\"),\"func cos\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func cos(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the cosine of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),`.\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\" must be an angle in radians.\"),mdx(\"h3\",e({},{id:\"func-tan\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-tan\"}),\"#\"),\"func tan\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func tan(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the tangent of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),`.\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\" must be an angle in radians.\"),mdx(\"h3\",e({},{id:\"func-asin\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-asin\"}),\"#\"),\"func asin\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func asin(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the inverse sine of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\" in radians.\"),mdx(\"h3\",e({},{id:\"func-acos\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-acos\"}),\"#\"),\"func acos\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func acos(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the inverse cosine of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\" in radians.\"),mdx(\"h3\",e({},{id:\"func-atan\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-atan\"}),\"#\"),\"func atan\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func atan(x: Float | Integer): Float;\n`)),mdx(\"p\",null,\"Returns the inverse tangent of \",mdx(\"inlineCode\",{parentName:\"p\"},\"x\"),\" in radians.\"),mdx(\"h2\",e({},{id:\"input-and-output\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#input-and-output\"}),\"#\"),\"Input and output\"),mdx(\"h3\",e({},{id:\"func-print\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-print\"}),\"#\"),\"func print\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func print(values...: Value...);\n`)),mdx(\"p\",null,\"Prints the given values followed by a new line.\"),mdx(\"h3\",e({},{id:\"func-loop_timestamp\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-loop_timestamp\"}),\"#\"),\"func loop_timestamp\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func loop_timestamp(): Integer;\n`)),mdx(\"p\",null,\"Returns the current loop timestamp.\"),mdx(\"p\",null,\"The returned value is the number of \",mdx(\"em\",{parentName:\"p\"},\"milliseconds\"),` since some arbitrary starting point - usually the start of the program - until the start of the current main loop iteration.\nThe value is guaranteed to be `,mdx(\"em\",{parentName:\"p\"},\"monotonic\"),\", i.e. it will never decrease.\"),mdx(\"p\",null,`The loop timestamp is refreshed on every iteration of the runtime's main loop.\nA single iteration involves calling all ready coroutines and continues until all coroutines are either done or waiting for the completion of an asynchronous function.`),mdx(\"p\",null,\"Within the same iteration, \",mdx(\"inlineCode\",{parentName:\"p\"},\"loop_timestamp()\"),\" will always return the same value.\"),mdx(\"h2\",e({},{id:\"coroutines\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#coroutines\"}),\"#\"),\"Coroutines\"),mdx(\"p\",null,\"Tiro's coroutines implement \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Cooperative_multitasking\"}),\"cooperative multitasking\"),` within a shared operating system thread.\nThis means that a coroutine will continue running until it gives up control voluntarily.\nIt will never be preempted by a scheduler behind the scenes.`),mdx(\"p\",null,\"In order to give up control (also called \",mdx(\"em\",{parentName:\"p\"},\"yielding\"),\"), a coroutine can perform one of the following actions:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`Call an asynchronous function.\nAsynchronous functions usually yield behind the scenes automatically, transparent to the caller.\nThey can be implemented in native code or by using the the `,mdx(\"a\",e({parentName:\"p\"},{href:\"#func-yield_coroutine\"}),\"yield_coroutine()\"),\" function (like the function \",mdx(\"inlineCode\",{parentName:\"p\"},\"lock()\"),\" in the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#mutex-example\"}),\"mutex example\"),\").\"),mdx(\"p\",{parentName:\"li\"},\"While an asynchronous function waits for its completion, other coroutines can execute on the shared operating system thread.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},\"Call \",mdx(\"a\",e({parentName:\"p\"},{href:\"#func-dispatch\"}),\"dispatch()\"),`.\nOther coroutines that are ready to execute will have the chance to run.\nThe current coroutine will resume execution once those coroutines have yielded.`),mdx(\"p\",{parentName:\"li\"},\"It can be useful to invoke \",mdx(\"inlineCode\",{parentName:\"p\"},\"dispatch()\"),\" in potentially long loops to avoid blocking the system for too long.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},\"Call \",mdx(\"a\",e({parentName:\"p\"},{href:\"#func-yield_coroutine\"}),\"yield_coroutine()\"),`.\nThis will stop the coroutine until it has been manually resumed by another coroutine.\nCare must be taken when using this primitive function!`))),mdx(\"h3\",e({},{id:\"type-coroutine\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-coroutine\"}),\"#\"),\"type Coroutine\"),mdx(\"p\",null,`Coroutines represent lightweight threads of execution within a single operating system thread.\nThey are created through the native API or by calling `,mdx(\"inlineCode\",{parentName:\"p\"},\"std.launch()\"),\".\"),mdx(\"h3\",e({},{id:\"type-coroutinetoken\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-coroutinetoken\"}),\"#\"),\"type CoroutineToken\"),mdx(\"h3\",e({},{id:\"func-current_coroutine\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-current_coroutine\"}),\"#\"),\"func current_coroutine\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func current_coroutine(): Coroutine;\n`)),mdx(\"p\",null,\"Returns the current \",mdx(\"a\",e({parentName:\"p\"},{href:\"#type-coroutine\"}),\"Coroutine\"),\" instance, i.e. the coroutine from which \",mdx(\"inlineCode\",{parentName:\"p\"},\"current_coroutine()\"),\" was called.\"),mdx(\"h3\",e({},{id:\"func-launch\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-launch\"}),\"#\"),\"func launch\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func launch(fn: Function, args...: Value...): Coroutine;\n`)),mdx(\"p\",null,\"Executes \",mdx(\"inlineCode\",{parentName:\"p\"},\"fn(args...)\"),` from within a new coroutine.\nThe coroutine instance is returned by this function.`),mdx(\"p\",null,\"TODO: Should we return a future instead?\"),mdx(\"h3\",e({},{id:\"func-dispatch\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-dispatch\"}),\"#\"),\"func dispatch\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func dispatch();\n`)),mdx(\"p\",null,`Dispatches to other ready coroutines.\nThe current coroutine will resume execution after all other ready coroutines had the opportunity to run.`),mdx(\"h3\",e({},{id:\"func-coroutine_token\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-coroutine_token\"}),\"#\"),\"func coroutine_token\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func coroutine_token(): CoroutineToken;\n`)),mdx(\"p\",null,\"Returns a \",mdx(\"a\",e({parentName:\"p\"},{href:\"#type-coroutinetoken\"}),\"CoroutineToken\"),` instance suitable for resuming the current coroutine.\nCoroutine tokens are invalidated after the coroutine has been resumed again.\nSee `,mdx(\"a\",e({parentName:\"p\"},{href:\"#func-yield_coroutine\"}),\"yield_coroutine()\"),\" for an example.\"),mdx(\"p\",null,`WARNING: This is a low level API designed to control the execution of a coroutine manually.\nIt should only be used to create new asynchronous abstractions.`),mdx(\"h3\",e({},{id:\"func-yield_coroutine\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-yield_coroutine\"}),\"#\"),\"func yield_coroutine\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func yield_coroutine();\n`)),mdx(\"p\",null,`Immediately pauses execution of the current coroutine.\nExecution will only continue once the coroutine has been resumed via a `,mdx(\"a\",e({parentName:\"p\"},{href:\"#type-coroutinetoken\"}),\"CoroutineToken\"),\" previously obtained from \",mdx(\"a\",e({parentName:\"p\"},{href:\"#func-coroutine_token\"}),\"coroutine_token()\"),\".\"),mdx(\"p\",null,`WARNING: This is a low level API designed to control the execution of a coroutine manually.\nIt should only be used to create new asynchronous abstractions.`),mdx(\"a\",{id:\"mutex-example\"}),mdx(\"span\",{className:\"caption\"},\"Example: a simple Mutex\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`import std;\n\nexport func main() {\n    const mutex = createMutex();\n    const task = func(id) {\n        for var i = 0; i \u003c 3; i += 1 {\n            mutex.lock();\n            std.print(\"Hello from \\${id}\");\n            std.dispatch(); // Other coroutine can observe a locked mutex\n            mutex.unlock();\n        }\n    };\n\n    std.launch(task, \"1\");\n    std.launch(task, \"2\");\n}\n\n// Creates a simplistic mutex that only supports two coroutines.\nfunc createMutex() {\n    // Coroutine token if another coroutine is already waiting.\n    var waiter = null;\n    var locked = false;\n\n    return (\n        lock: func() {\n            if locked {\n                if waiter != null {\n                    std.panic(\"Cannot support more than one waiter\");\n                }\n                // Wait until the other coroutine unlocks.\n                waiter = std.coroutine_token();\n                std.yield_coroutine();\n            }\n            // At this point, either the mutex wasn't initially locked\n            // or yield_coroutine() returned, i.e. the other coroutine unlocked.\n            assert(!locked);\n            locked = true;\n        },\n        unlock: func() {\n            if !locked {\n                std.panic(\"Mutex was not locked\");\n            }\n            locked = false;\n            if waiter {\n                waiter.resume();\n                waiter = null;\n            }\n            // Give other coroutines the opportunity to run\n            std.dispatch();\n        }\n    );\n}\n`)),mdx(\"h2\",e({},{id:\"error-handling\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"anchor-link\",href:\"#error-handling\"}),\"#\"),\"Error handling\"),mdx(\"h3\",e({},{id:\"type-result\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-result\"}),\"#\"),\"type Result\"),mdx(\"p\",null,`A result represents the result of an operation that may fail.\nThe result type is the basic primitive type used in tiro's error handling facilities.`),mdx(\"p\",null,\"Results may be in one of two states:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"em\",{parentName:\"p\"},\"Success\"),\". Calling \",mdx(\"inlineCode\",{parentName:\"p\"},\"result.value()\"),\" returns the result of the operation.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},mdx(\"em\",{parentName:\"p\"},\"Failure\"),\". Calling \",mdx(\"inlineCode\",{parentName:\"p\"},\"result.reason()\"),\" returns a value explaining why the operation failed.\"))),mdx(\"p\",null,\"Results are constructed by calling the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#func-success\"}),\"success()\"),\" and \",mdx(\"a\",e({parentName:\"p\"},{href:\"#func-failure\"}),\"failure()\"),\" functions.\"),mdx(\"span\",{className:\"caption\"},\"Example: simple error handling\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`import std;\n\nexport func main() {\n    const result1 = operation(5);\n    std.print(result1.type(), result1.value()); // #success 10\n\n    const result2 = operation(-5);\n    std.print(result2.type(), result2.reason()); // #failure value too small!\n}\n\nfunc operation(n) {\n     if (n \u003c 0) {\n        return std.failure(\"value too small!\");\n    } else {\n        return std.success(n * 2);\n    }\n}\n`)),mdx(\"h4\",e({},{id:\"func-resulttype\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-resulttype\"}),\"#\"),\"func Result.type\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Result.type(): Symbol;\n`)),mdx(\"p\",null,\"Returns either \",mdx(\"inlineCode\",{parentName:\"p\"},\"#success\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"#failure\"),\", depending on the result's state.\"),mdx(\"h4\",e({},{id:\"func-resultis_success\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-resultis_success\"}),\"#\"),\"func Result.is_success\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Result.is_success(): Boolean;\n`)),mdx(\"p\",null,\"Returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" if the result represents success, \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\" otherwise.\"),mdx(\"h4\",e({},{id:\"func-resultis_failure\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-resultis_failure\"}),\"#\"),\"func Result.is_failure\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Result.is_failure(): Boolean;\n`)),mdx(\"p\",null,\"Returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" if the result represents failure, \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\" otherwise.\"),mdx(\"h4\",e({},{id:\"func-resultvalue\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-resultvalue\"}),\"#\"),\"func Result.value\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Result.value(): Value;\n`)),mdx(\"p\",null,`Returns the result's value.\nRequires that the result represents success.`),mdx(\"h4\",e({},{id:\"func-resultreason\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-resultreason\"}),\"#\"),\"func Result.reason\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Result.reason(): Value;\n`)),mdx(\"p\",null,`Returns the result's reason.\nRequires that the result represents failure.`),mdx(\"h3\",e({},{id:\"func-success\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-success\"}),\"#\"),\"func success\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func success(value: Value): Result;\n`)),mdx(\"p\",null,\"Returns a new successful \",mdx(\"a\",e({parentName:\"p\"},{href:\"#type-result\"}),\"Result\"),\" that holds the given \",mdx(\"inlineCode\",{parentName:\"p\"},\"value\"),\".\"),mdx(\"h3\",e({},{id:\"func-failure\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-failure\"}),\"#\"),\"func failure\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func failure(reason: value): Result;\n`)),mdx(\"p\",null,\"Returns a new failure \",mdx(\"a\",e({parentName:\"p\"},{href:\"#type-result\"}),\"Result\"),\" that holds the given \",mdx(\"inlineCode\",{parentName:\"p\"},\"reason\"),\".\"),mdx(\"h3\",e({},{id:\"type-exception\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#type-exception\"}),\"#\"),\"type Exception\"),mdx(\"p\",null,`Exceptions represent unexpected (and often fatal) errors encountered during program execution.\nThey are generated when code panics, for example by calling `,mdx(\"a\",e({parentName:\"p\"},{href:\"#func-panic\"}),\"panic()\"),\".\"),mdx(\"p\",null,\"It is often preferable to use the less intrusive \",mdx(\"a\",e({parentName:\"p\"},{href:\"#type-result\"}),\"Result\"),` type instead.\nPanicking should be reserved for signaling critical error conditions such as programming errors.`),mdx(\"p\",null,\"TODO: Other properties (stack trace, user data, secondary exceptions)\"),mdx(\"h4\",e({},{id:\"func-exceptionmessage\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"anchor-link\",href:\"#func-exceptionmessage\"}),\"#\"),\"func Exception.message\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func Exception.message(): String;\n`)),mdx(\"p\",null,\"Returns the exception's error message.\"),mdx(\"h3\",e({},{id:\"func-panic\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-panic\"}),\"#\"),\"func panic\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func panic(message: String);\n`)),mdx(\"p\",null,\"Immediately aborts execution of the current function with an error explained by \",mdx(\"inlineCode\",{parentName:\"p\"},\"message\"),`.\nFrom within the `,mdx(\"inlineCode\",{parentName:\"p\"},\"panic\"),\" function, a new \",mdx(\"a\",e({parentName:\"p\"},{href:\"#type-exception\"}),\"Exception\"),\" is constructed with the given \",mdx(\"inlineCode\",{parentName:\"p\"},\"message\"),\" and \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Call_stack#Unwinding\"}),\"stack unwinding\"),` is started.\nUnwinding can be stopped by using the `,mdx(\"a\",e({parentName:\"p\"},{href:\"#func-catch_panic\"}),\"catch_panic\"),\" function.\"),mdx(\"p\",null,\"This function is designed to report \",mdx(\"em\",{parentName:\"p\"},\"unexpected\"),` errors such as programming errors.\nUse the `,mdx(\"a\",e({parentName:\"p\"},{href:\"#type-result\"}),\"Result\"),\" type instead if errors can be expected, e.g. to report missing files.\"),mdx(\"h3\",e({},{id:\"func-catch_panic\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"anchor-link\",href:\"#func-catch_panic\"}),\"#\"),\"func catch_panic\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`func catch_panic(fn: Function): Result;\n`)),mdx(\"p\",null,\"Invokes \",mdx(\"inlineCode\",{parentName:\"p\"},\"fn()\"),\" and stops propagation of any non-fatal panic thrown by \",mdx(\"inlineCode\",{parentName:\"p\"},\"fn\"),` or its callees.\nAfter execution of `,mdx(\"inlineCode\",{parentName:\"p\"},\"fn()\"),\" completes (either through panic or through normal return), a \",mdx(\"a\",e({parentName:\"p\"},{href:\"#type-result\"}),\"Result\"),\" is returned:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"If \",mdx(\"inlineCode\",{parentName:\"li\"},\"fn\"),\" returned normally, its return value is wrapped into a success result and returned.\"),mdx(\"li\",{parentName:\"ul\"},\"If a panic was caught, a failure result is returned. The result's \",mdx(\"inlineCode\",{parentName:\"li\"},\"reason\"),\" is set to the caught value.\")),mdx(\"span\",{className:\"caption\"},\"Example: catching a panic from a function\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),`import std;\n\nexport func main() {\n    const result = std.catch_panic(may_fail);\n    if (result.is_success()) {\n        std.print(\"success:\", result.value());\n    } else {\n        std.print(\"failure:\", result.reason().message());\n    }\n}\n\nfunc may_fail() {\n    // Replace \\`false\\` with \\`true\\` to return normally\n    if (false) {\n        return 42;\n    } else {\n        std.panic(\"help!\");\n    }\n}\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["stdlib"]},"buildId":"FdI6KbDcbSGIqNemP9sGp","assetPrefix":"/tiro-website","runtimeConfig":{"basePath":"/tiro-website"},"isFallback":false,"gsp":true}</script><script nomodule="" src="/tiro-website/_next/static/chunks/polyfills-4739f5d96dfd26a98fca.js"></script><script src="/tiro-website/_next/static/chunks/webpack-1c4df81e47dc282f3295.js" async=""></script><script src="/tiro-website/_next/static/chunks/framework.453115041c71f6937693.js" async=""></script><script src="/tiro-website/_next/static/chunks/commons.51b98284b0ee82cfedda.js" async=""></script><script src="/tiro-website/_next/static/chunks/main-331f23dcb60961fd008c.js" async=""></script><script src="/tiro-website/_next/static/chunks/077bbc3e42b200d19aa8b06179d2d8d0a5231ac6.637069d83bf990885541.js" async=""></script><script src="/tiro-website/_next/static/chunks/pages/_app-11ca0b17fb5a8b952a65.js" async=""></script><script src="/tiro-website/_next/static/chunks/31ad9c9d.f6000bcd368b3f5e448a.js" async=""></script><script src="/tiro-website/_next/static/chunks/2c060dff92e6454490672d24ff1b5f7d837bc315.9e04c498ff7984a5eb5a.js" async=""></script><script src="/tiro-website/_next/static/chunks/cb62dbd6a1bdc0783d6bfd7347e6b2b91c6334b4.547212e3b228b0eed42b.js" async=""></script><script src="/tiro-website/_next/static/chunks/pages/docs/%5B...slug%5D-b17462f1feeecc64df94.js" async=""></script><script src="/tiro-website/_next/static/FdI6KbDcbSGIqNemP9sGp/_buildManifest.js" async=""></script><script src="/tiro-website/_next/static/FdI6KbDcbSGIqNemP9sGp/_ssgManifest.js" async=""></script></body></html>